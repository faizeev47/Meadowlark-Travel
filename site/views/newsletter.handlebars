<h2>Sign up for our newsletter: </h2>
<p>Using the <span class="code">'/process?form=newsletter'</span> POST action</p>
<form class="custom-form form-horizontal" role="form"
      action="/process?form=newsletter" method="POST" id="newsletterForm">
  <input type="hidden" name="_csrf" value="{{csrf}}">
  <div class="form-group">
    <label for="fieldName" class="col-sm-2 control-label">Name</label>
    <div class="col-4">
      <input type="text" class="form-control" id="fieldName" name="name">
    </div>
  </div>
  <div class="form-group">
    <label for="fieldEmail" class="col-sm-2 control-label">Email</label>
    <div class="col-4">
      <input type="email" class="form-control" id="fieldEmail" name="email">
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-4">
      <button type="submit" class="btn btn-primary">Register</button>
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-4">
      <button id="submitButton" type="button" class="btn btn-secondary">Register quickly</button>
    </div>
  </div>
</form>

<hr>

<h2>Sign up for our newsletter: </h2>
<p>Using the <span class="code">'/newsletter'</span> POST action</p>
<form class="custom-form form-horizontal" role="form"
      action="/newsletter" method="POST" id="newsletterForm">
  <input type="hidden" name="_csrf" value="{{csrf}}">
  <div class="form-group">
    <label for="fieldName" class="col-sm-2 control-label">Name</label>
    <div class="col-4">
      <input type="text" class="form-control" id="fieldName" name="name">
    </div>
  </div>
  <div class="form-group">
    <label for="fieldEmail" class="col-sm-2 control-label">Email</label>
    <div class="col-4">
      <input type="email" class="form-control" id="fieldEmail" name="email">
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-4">
      <button type="submit" class="btn btn-primary">Register</button>
    </div>
  </div>
</form>

<div id="response">

</div>


{{#section 'jquery'}}
  <script type="text/javascript">
    $(document).ready(function() {
      $('#submitButton').on('click', function(evt) {
        console.log("here")
        evt.preventDefault();
        var action = $(this).attr('action');
        var response = $('#response');
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            if (this.responseText) {
              response.html('<h2>Thank you!</h2>');
            }
            else {
              response.html('Problem number 2');
            }
          }
          else {
            response.html('Problem number 1');
          }
        };
        xhttp.open("POST", "/process");
        xhttp.send();
      });
    });
  </script>
{{/section}}
